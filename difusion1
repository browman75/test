<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>æ°£é«”åˆ†å­æ“´æ•£æ¨¡æ“¬å™¨</title>
<style>
  body { text-align:center; font-family:sans-serif; background:#f0f8ff; }
  canvas { border:1px solid #333; background:white; margin-top:10px; }
  .controls { margin-top:10px; }
  label { margin:0 5px; }
</style>
</head>
<body>
<h2>ğŸŒ¬ï¸ æ°£é«”åˆ†å­æ“´æ•£èˆ‡å¤–åŠ›æ¨¡æ“¬å™¨</h2>
<p>èª¿æ•´åƒæ•¸è§€å¯Ÿåˆ†å­æ“´æ•£é€Ÿç‡è®ŠåŒ–</p>

<div class="controls">
  <label>æº«åº¦: <input type="range" id="temp" min="1" max="10" value="5"></label>
  <label>åˆ†å­å¤§å°: <input type="range" id="size" min="1" max="10" value="3"></label>
  <label>é¢¨é€Ÿ: <input type="range" id="wind" min="-5" max="5" value="0"></label>
  <button id="reset">é‡ç½®</button>
</div>

<canvas id="simCanvas" width="800" height="400"></canvas>
<p id="stats"></p>

<script>
const canvas = document.getElementById("simCanvas");
const ctx = canvas.getContext("2d");
const tempSlider = document.getElementById("temp");
const sizeSlider = document.getElementById("size");
const windSlider = document.getElementById("wind");
const stats = document.getElementById("stats");
const resetBtn = document.getElementById("reset");

let particles = [];
const numParticles = 150;

function resetParticles() {
  particles = [];
  for (let i = 0; i < numParticles; i++) {
    particles.push({
      x: Math.random() * canvas.width / 2, // åˆå§‹é›†ä¸­åœ¨å·¦åŠ
      y: Math.random() * canvas.height,
      vx: (Math.random() - 0.5) * 2,
      vy: (Math.random() - 0.5) * 2,
      color: "rgba(0,150,255,0.7)"
    });
  }
}
resetParticles();

function update() {
  const temp = parseFloat(tempSlider.value);
  const size = parseFloat(sizeSlider.value);
  const wind = parseFloat(windSlider.value);

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  let leftCount = 0;
  let rightCount = 0;

  for (let p of particles) {
    p.vx += (Math.random() - 0.5) * 0.2 * temp;  // æº«åº¦å½±éŸ¿éš¨æ©Ÿé€Ÿåº¦è®ŠåŒ–
    p.vy += (Math.random() - 0.5) * 0.2 * temp;
    p.vx += wind * 0.05; // é¢¨å½±éŸ¿æ•´é«”åç§»

    // æ ¹æ“šåˆ†å­å¤§å°ï¼Œé€Ÿåº¦è¡°æ¸›ï¼ˆå¤§åˆ†å­ç§»å‹•æ…¢ï¼‰
    p.vx *= (1 - size * 0.03);
    p.vy *= (1 - size * 0.03);

    p.x += p.vx;
    p.y += p.vy;

    // ç¢°æ’é‚Šç•Œåå½ˆ
    if (p.x < 0) { p.x = 0; p.vx *= -1; }
    if (p.x > canvas.width) { p.x = canvas.width; p.vx *= -1; }
    if (p.y < 0) { p.y = 0; p.vy *= -1; }
    if (p.y > canvas.height) { p.y = canvas.height; p.vy *= -1; }

    // è¨ˆç®—å·¦å³åˆ†å­æ•¸
    if (p.x < canvas.width/2) leftCount++;
    else rightCount++;

    // ç¹ªè£½ç²’å­
    ctx.beginPath();
    ctx.arc(p.x, p.y, size, 0, Math.PI * 2);
    ctx.fillStyle = p.color;
    ctx.fill();
  }

  stats.textContent = `å·¦å´: ${leftCount} é¡† | å³å´: ${rightCount} é¡† | å·®å€¼: ${Math.abs(leftCount - rightCount)}`;
  requestAnimationFrame(update);
}

resetBtn.onclick = resetParticles;
update();
</script>
</body>
</html>
